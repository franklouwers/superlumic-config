---
- name: "[Docker] Create .docker directory"
  file: path="{{ home_dir }}/.docker" state=directory

- name: "[Docker] Garbage Collection Exclusion files"
  copy: src="{{ item }}"" dest="{{ home_dir }}/.docker/{{ item }}"
  with_items:
    - excluded-containers
    - excluded-images

- name: "[Docker] Set the dockergc alias"
  lineinfile: dest={{ home_dir }}/.bash_profile
              line="alias dockergc='docker run --rm -v /var/run/docker.sock:/var/run/docker.sock -v /etc:/etc -e EXCLUDE_FROM_GC=~/.docker/excluded-images -e EXCLUDE_CONTAINERS_FROM_GC=~/.docker/excluded-containers  spotify/docker-gc'"

- name: "[Docker] Install Docker for Mac"
  homebrew_cask: name=docker state=present

- name: "[Docker] Pull dockergc"
  docker_image:
    name: registry.ansible.com/chouseknecht/sinatra
    tag: latest
    state: present

